<div class="layout">
  <header class="layout__header">
    <div>
      <p class="layout__status">TP</p>
      <h1>Gestion des pollutions</h1>
    </div>
    <nav>
      <a
        routerLink="/pollutions"
        routerLinkActive="layout__link--active"
        ariaCurrentWhenActive="page"
        class="layout__link"
      >
        Pollutions
      </a>
      <a
        routerLink="/favoris"
        routerLinkActive="layout__link--active"
        ariaCurrentWhenActive="page"
        class="layout__link layout__link--favorites"
      >
        Favoris
        @if ((favoritesService.count$ | async); as count) {
          @if (count > 0) {
            <span class="favorites-badge">{{ count }}</span>
          }
        }
      </a>
      <a
        routerLink="/users"
        routerLinkActive="layout__link--active"
        ariaCurrentWhenActive="page"
        class="layout__link"
      >
        Utilisateurs
      </a>
      
      @if (authService.isAuthenticated$ | async) {
        <div class="user-info">
          @if (authService.currentUser$ | async; as user) {
            <span class="user-name">{{ user.prenom }} {{ user.nom }}</span>
          }
          <button class="btn-logout" (click)="authService.logout()">DÃ©connexion</button>
        </div>
      } @else {
        <a
          routerLink="/login"
          routerLinkActive="layout__link--active"
          ariaCurrentWhenActive="page"
          class="layout__link"
        >
          Connexion
        </a>
      }
    </nav>
  </header>

  <main class="layout__main">
    <router-outlet />
  </main>
</div>
